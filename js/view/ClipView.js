/**********************************************
 * Copyright (C) 2014 Lukas Laag
 * This file is part of dictaphone.js.
 * 
 * dictaphone.js is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * dictaphone.js is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with dictaphone.js.  If not, see http://www.gnu.org/licenses/
 **********************************************/
define(['view/ViewBase', 'view/template/ClipTemplate'],
  function(ViewBase, ClipTemplate) {

    "use strict";
    var PLAY_ICON = 'data:image/svg+xml;charset=UTF-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjxzdmcgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIGlkPSJzdmcxMzA3IiB2aWV3Qm94PSIwIDAgNDggNDgiPgogIDxkZWZzIGlkPSJkZWZzMTMwOSI+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhckdyYWRpZW50MjMwNiIgeDE9IjcxLjI4OSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHkxPSIxMjQuMTIiIGdyYWRpZW50VHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQ1IC03MS4wOTQpIiB4Mj0iNzAuODI3IiB5Mj0iOTUiPgogICAgICA8c3RvcCBpZD0ic3RvcDUwNzciIHN0b3AtY29sb3I9IiNhZGIwYTgiIG9mZnNldD0iMCIvPgogICAgICA8c3RvcCBpZD0ic3RvcDUwNzkiIHN0b3AtY29sb3I9IiM0NjQ3NDQiIG9mZnNldD0iMSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0icmFkaWFsR3JhZGllbnQyMzE0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3k9IjgzLjk5MSIgY3g9IjEwNy41OSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCguMDUzMjQzIC0uODM2MjQgMi4wMTk1IC4xMjg1NyAtMTUxLjkyIDEwOC4wOCkiIHI9IjEyLjU1MiI+CiAgICAgIDxzdG9wIGlkPSJzdG9wMjY5MyIgc3RvcC1jb2xvcj0iI2ZmZiIgb2Zmc2V0PSIwIi8+CiAgICAgIDxzdG9wIGlkPSJzdG9wMjY5NSIgc3RvcC1jb2xvcj0iI2QzZDdjZiIgb2Zmc2V0PSIxIj4KICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InN0b3AtY29sb3IiIGF0dHJpYnV0ZVR5cGU9IkNTUyIKICAgICAgICAgICAgICAgICAgIGJlZ2luPSIwcyIgZHVyPSIxcyIgdmFsdWVzPSIjZDNkN2NmOyMwMDAwY2Y7I2QzZDdjZiIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGNhbGNNb2RlPSJzcGxpbmUiLz4KICAgICAgPC9zdG9wPgogICAgPC9yYWRpYWxHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyR3JhZGllbnQyNjkwIiB4MT0iNzAuOTE0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeTE9IjEwMS43NCIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgxLjEyODIgMCAwIDEuMTI4MiAtNTMuOTkzIC04My4zNikiIHgyPSI3MC45NTIiIHkyPSI4OC45MjQiPgogICAgICA8c3RvcCBpZD0ic3RvcDI2ODYiIHN0b3AtY29sb3I9IiNmZmYiIG9mZnNldD0iMCIvPgogICAgICA8c3RvcCBpZD0ic3RvcDI2ODgiIG9mZnNldD0iMSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+CiAgPGcgaWQ9ImxheWVyMSI+CiAgICA8cGF0aCBpZD0icGF0aDI2ODIiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIG9wYWNpdHk9Ii4xNSIgc3R5bGU9ImNvbG9yOiMwMDAwMDAiIGQ9Im0xMiAzOS41di0zMC41bDI2LjA3IDE0LjgxNy0yNi4wNyAxNS42ODN6IiBzdHJva2U9InVybCgjbGluZWFyR3JhZGllbnQyNjkwKSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBpZD0icGF0aDMzNzUiIGQ9Im0xMi40OTkgMzcuODExdi0yNy44MTFsMjQuMTA0IDEzLjkwNi0yNC4xMDQgMTMuOTA1eiIgc3R5bGU9ImNvbG9yOiMwMDAwMDAiIGZpbGw9InVybCgjcmFkaWFsR3JhZGllbnQyMzE0KSIgZmlsbC1ydWxlPSJldmVub2RkIi8+CiAgICA8cGF0aCBpZD0icGF0aDI0NzkiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0eWxlPSJjb2xvcjojMDAwMDAwIiBkPSJtMTIuNDk5IDM3LjgxMXYtMjcuODExbDI0LjEwNCAxMy45MDYtMjQuMTA0IDEzLjkwNXoiIHN0cm9rZT0idXJsKCNsaW5lYXJHcmFkaWVudDIzMDYpIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBpZD0icGF0aDI0ODEiIGQ9Im0xMi45OTkgMTAuODc0djI2LjA2M2wyMi41OTQtMTMuMDMxLTIyLjU5NC0xMy4wMzJ6bTEgMS43NWwxOS41NjMgMTEuMjgyLTE5LjU2MyAxMS4yODF2LTIyLjU2M3oiIHN0eWxlPSJjb2xvcjojMDAwMDAwIiBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4KICAgIDxwYXRoIGlkPSJwYXRoMjMzOSIgb3BhY2l0eT0iLjUiIHN0eWxlPSJjb2xvcjojMDAwMDAwIiBkPSJtMTMuOTM4IDEyLjU2MnYxMS42ODhjNC4yNjktMC4wNDUgOS4xNjQtMC4zNDYgMTcuMDYyLTEuODc1bC0xNy4wNjItOS44MTN6IiBkaXNwbGF5PSJibG9jayI+CiAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbCIgYXR0cmlidXRlVHlwZT0iQ1NTIgogICAgICAgICBiZWdpbj0iMHMiIGR1cj0iMXMiIHZhbHVlcz0iI2ZmZjsjMDBmOyNmZmYiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBjYWxjTW9kZT0ic3BsaW5lIi8+CiAgICA8L3BhdGg+CiAgPC9nPgogIDxtZXRhZGF0YT4KICAgIDxyZGY6UkRGPgogICAgICA8Y2M6V29yaz4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZSByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIi8+CiAgICAgICAgPGNjOmxpY2Vuc2UgcmRmOnJlc291cmNlPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9wdWJsaWNkb21haW4vIi8+CiAgICAgICAgPGRjOnB1Ymxpc2hlcj4KICAgICAgICAgIDxjYzpBZ2VudCByZGY6YWJvdXQ9Imh0dHA6Ly9vcGVuY2xpcGFydC5vcmcvIj4KICAgICAgICAgICAgPGRjOnRpdGxlPk9wZW5jbGlwYXJ0PC9kYzp0aXRsZT4KICAgICAgICAgIDwvY2M6QWdlbnQ+CiAgICAgICAgPC9kYzpwdWJsaXNoZXI+CiAgICAgIDwvY2M6V29yaz4KICAgICAgPGNjOkxpY2Vuc2UgcmRmOmFib3V0PSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9wdWJsaWNkb21haW4vIj4KICAgICAgICA8Y2M6cGVybWl0cyByZGY6cmVzb3VyY2U9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zI1JlcHJvZHVjdGlvbiIvPgogICAgICAgIDxjYzpwZXJtaXRzIHJkZjpyZXNvdXJjZT0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjRGlzdHJpYnV0aW9uIi8+CiAgICAgICAgPGNjOnBlcm1pdHMgcmRmOnJlc291cmNlPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyNEZXJpdmF0aXZlV29ya3MiLz4KICAgICAgPC9jYzpMaWNlbnNlPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+Cjwvc3ZnPgo=';
    var RECORD_ICON = 'data:image/svg+xml;charset=UTF-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjxzdmcgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIGlkPSJzdmcxMzA3IiB2aWV3Qm94PSIwIDAgNDggNDgiPgogIDxkZWZzIGlkPSJkZWZzMTMwOSI+CiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9InJhZGlhbEdyYWRpZW50MjIyOCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGN5PSIzNi40MjEiIGN4PSIyNC44MzciIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLjUzNjcyIC0zLjI0MTdlLTEzIDE2Ljg3MykiIHI9IjE1LjY0NSI+CiAgICAgIDxzdG9wIGlkPSJzdG9wODY2NCIgb2Zmc2V0PSIwIi8+CiAgICAgIDxzdG9wIGlkPSJzdG9wODY2NiIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjEiLz4KICAgIDwvcmFkaWFsR3JhZGllbnQ+CiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9InJhZGlhbEdyYWRpZW50MTM2OCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGN5PSItMy4yMTgzIiBjeD0iMjEuOTI5IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDMuNjU4OCAtMy4xMzM5ZS0xNiAxLjcxOTVlLTE2IDIuMDgwOCAtNjIuNDE2IDEyLjc2MikiIHI9IjEzIj4KICAgICAgPHN0b3AgaWQ9InN0b3AzMzQyIiBzdG9wLWNvbG9yPSIjZmZmIiBvZmZzZXQ9IjAiLz4KICAgICAgPHN0b3AgaWQ9InN0b3AzMzQ0IiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMSIvPgogICAgPC9yYWRpYWxHcmFkaWVudD4KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0icmFkaWFsR3JhZGllbnQyMjYzIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3k9IjI4LjExNiIgY3g9IjIyLjUiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMi4zNjU2IC00Ljk0MjJlLTE2IDUuMzU5OGUtMTYgMi4yMDI4IC0zMC43MjUgLTM0LjI0KSIgcj0iMTQuNTM4Ij4KICAgICAgPCEtLTxzdG9wIGlkPSJzdG9wMjI1OSIgc3RvcC1jb2xvcj0iI2VmMjkyOSIgb2Zmc2V0PSIwIi8+CiAgICAgIDxzdG9wIGlkPSJzdG9wMjI2MSIgc3RvcC1jb2xvcj0iI2MwMCIgb2Zmc2V0PSIxIi8+IC0tPgogICAgICAgIDxzdG9wIGlkPSJzdG9wMjI1OSIgc3RvcC1jb2xvcj0iI2VmMjkyOSIgb2Zmc2V0PSIwIj4KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ic3RvcC1jb2xvciIgYXR0cmlidXRlVHlwZT0iQ1NTIgogICAgICAgICAgICAgYmVnaW49IjBzIiBkdXI9IjFzIiB2YWx1ZXM9IiNlZjI5Mjk7IzY2MTExMTsjZWYyOTI5IiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgY2FsY01vZGU9InNwbGluZSIvPgogICAgICAgIDwvc3RvcD4KICAgICAgICA8c3RvcCBpZD0ic3RvcDIyNjEiIHN0b3AtY29sb3I9IiNjMDAiIG9mZnNldD0iMSI+CiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InN0b3AtY29sb3IiIGF0dHJpYnV0ZVR5cGU9IkNTUyIKICAgICAgICAgICAgIGJlZ2luPSIwcyIgZHVyPSIxcyIgdmFsdWVzPSIjYzAwOyM2MTE7I2MwMCIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGNhbGNNb2RlPSJzcGxpbmUiLz4KICAgICAgICA8L3N0b3A+CiAgICA8L3JhZGlhbEdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXJHcmFkaWVudDM4NDMiIHkyPSIzNS41NDYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB5MT0iOC45MTE1IiB4Mj0iMjEuODE2IiB4MT0iMjEuNzAyIj4KICAgICAgPHN0b3AgaWQ9InN0b3AzODM5IiBvZmZzZXQ9IjAiLz4KICAgICAgPHN0b3AgaWQ9InN0b3AzODQxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii43ODM1MSIgb2Zmc2V0PSIxIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8ZyBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoIGlkPSJwYXRoMzgzNSIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgb3BhY2l0eT0iLjE1IiBzdHlsZT0iY29sb3I6IzAwMDAwMCIgZD0ibTM2LjUgMjJhMTQgMTMgMCAxIDEgLTI4IDAgMTQgMTMgMCAxIDEgMjggMHoiIGZpbGwtcnVsZT0iZXZlbm9kZCIgdHJhbnNmb3JtPSJtYXRyaXgoLjkyMDcwIDAgMCAuOTkzNTggMy42Nzk1IDEuNjQxMikiIHN0cm9rZT0idXJsKCNsaW5lYXJHcmFkaWVudDM4NDMpIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2Utd2lkdGg9IjMuMTM2NiIgZmlsbD0idXJsKCNyYWRpYWxHcmFkaWVudDIyNjMpIi8+CiAgICA8cGF0aCBpZD0icGF0aDIyMjYiIG9wYWNpdHk9Ii4wNCIgc3R5bGU9ImNvbG9yOiMwMDAwMDAiIGQ9Im00MC40ODIgMzYuNDIxYTE1LjY0NSA4LjM5NjkgMCAxIDEgLTMxLjI5IDAgMTUuNjQ1IDguMzk2OSAwIDEgMSAzMS4yOSAweiIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjE1MDUgMCAwIC41NjU2OCAtNC41NzY1IDE2LjU1MykiIGZpbGw9InVybCgjcmFkaWFsR3JhZGllbnQyMjI4KSIvPgogICAgPHBhdGggaWQ9InBhdGgyNTI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHlsZT0iY29sb3I6IzAwMDAwMCIgZD0ibTM2LjUgMjJhMTQgMTMgMCAxIDEgLTI4IDAgMTQgMTMgMCAxIDEgMjggMHoiIGZpbGwtcnVsZT0iZXZlbm9kZCIgdHJhbnNmb3JtPSJtYXRyaXgoLjg5NDg2IDAgMCAuOTY1NyAzLjg1NTggMi42NjAzKSIgc3Ryb2tlPSIjYzAwIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2Utd2lkdGg9IjEuMDc1NyIgZmlsbD0idXJsKCNyYWRpYWxHcmFkaWVudDIyNjMpIi8+CiAgICA8cGF0aCBpZD0icGF0aDI1MjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0eWxlPSJjb2xvcjojMDAwMDAwIiBkPSJtMzggMjRhMTQgMTQgMCAxIDEgLTI4IDAgMTQgMTQgMCAxIDEgMjggMHoiIHRyYW5zZm9ybT0ibWF0cml4KC44MjE0MyAwIDAgLjgyMTQzIDQuMjg1MSA0LjE5MTUpIiBzdHJva2U9IiNmNzdkN2QiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS13aWR0aD0iMS4yMTc0IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBpZD0icGF0aDI1MjkiIG9wYWNpdHk9Ii42IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9InVybCgjcmFkaWFsR3JhZGllbnQxMzY4KSIgZD0ibTIzLjg0MyAxMS45MDZjLTYuMjc5IDAuMDc5LTExLjQwNCA0Ljk5Mi0xMS44MTIgMTEuMTg3IDYuMTE3IDIuNTE3IDEzLjg3LTEuNDUxIDIzLjE0Mi0zLjM4Mi0wLjY4OS0yLjc0OC00LjU1NS03LjgwNS0xMS4xNzQtNy44MDUtMC4wNTEgMC0wLjEwNC0wLjAwMS0wLjE1NiAweiIvPgogIDwvZz4KICA8bWV0YWRhdGE+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcms+CiAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICAgICAgPGRjOnR5cGUgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIvPgogICAgICAgIDxjYzpsaWNlbnNlIHJkZjpyZXNvdXJjZT0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvcHVibGljZG9tYWluLyIvPgogICAgICAgIDxkYzpwdWJsaXNoZXI+CiAgICAgICAgICA8Y2M6QWdlbnQgcmRmOmFib3V0PSJodHRwOi8vb3BlbmNsaXBhcnQub3JnLyI+CiAgICAgICAgICAgIDxkYzp0aXRsZT5PcGVuY2xpcGFydDwvZGM6dGl0bGU+CiAgICAgICAgICA8L2NjOkFnZW50PgogICAgICAgIDwvZGM6cHVibGlzaGVyPgogICAgICA8L2NjOldvcms+CiAgICAgIDxjYzpMaWNlbnNlIHJkZjphYm91dD0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvcHVibGljZG9tYWluLyI+CiAgICAgICAgPGNjOnBlcm1pdHMgcmRmOnJlc291cmNlPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyNSZXByb2R1Y3Rpb24iLz4KICAgICAgICA8Y2M6cGVybWl0cyByZGY6cmVzb3VyY2U9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zI0Rpc3RyaWJ1dGlvbiIvPgogICAgICAgIDxjYzpwZXJtaXRzIHJkZjpyZXNvdXJjZT0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjRGVyaXZhdGl2ZVdvcmtzIi8+CiAgICAgIDwvY2M6TGljZW5zZT4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgo8L3N2Zz4K';
    return ViewBase.extend({
      tagName: 'li',
      template: ClipTemplate,
      initialize: function initialize() {
        this.listenTo(this.model, 'change:name', this.updateName);
        this.listenTo(this.model, 'clip:state', this.updateIcon);
        this.listenTo(this.model, 'clip:length', this.updateDuration);
      },
      render : function render() {
        var data = {};
        data.id = this.model.id;
        data.name = this.model.get('name');
        data.creationDate = this.model.getCreationDate();
        data.duration = this.model.getDuration();
        data.icon = this.getIcon();
        this.$el.html(this.template(data));
        this.name = this.$('span[role="name"]');
        this.duration = this.$('span[class="duration"]');
        this.icon = this.$('img');
        this.link = this.$('a');
        return this;
      },
      getIcon : function getIcon() {
        if (this.model.isRecording()) {
          return RECORD_ICON;
        }
        if (this.model.isPlaying()) {
          return PLAY_ICON;
        }
        return null;
      },
      updateName : function updateName() {
        this.name.text(this.model.get('name'));
      },
      updateDuration : function updateDuration() {
        this.duration.text(this.model.getDuration());
      },
      updateIcon : function updateIcon() {
        var icon = this.getIcon();
        if (icon) {
          this.icon.attr('src', icon);
          this.icon.css('visibility', 'visible');
        } else {
          this.icon.css('visibility', 'hidden');
        }
        this.link.attr('href', ['#/', this.model.isRecording() ? 'record' : 'play', '/', this.model.id].join(''));
      }
    });
  }
);

